<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="https://i.imgur.com/93enhix.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BAKING SODA TRICK REVEAL</title>
    
    <!-- Hotjar Tracking Code for bluedrops v2 -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:6454408,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>

    <!-- âœ… CORRECT: Utmify Tracking Code -->
    <script>
      window.pixelId = "681eb087803be4de5c3bd68b";
      var a = document.createElement("script");
      a.setAttribute("async", "");
      a.setAttribute("defer", "");
      a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
      document.head.appendChild(a);
      
      // âœ… NEW: Enhanced Utmify integration with checkout-button detection
      window.utmifyQueue = window.utmifyQueue || [];
      
      // Function to track InitiateCheckout when checkout buttons are clicked
      function trackUtmifyInitiateCheckout(element) {
        console.log('ðŸŽ¯ Utmify: Tracking InitiateCheckout for element:', element);
        
        if (typeof window.utmify === 'function') {
          window.utmify('track', 'InitiateCheckout', {
            element_class: element.className,
            element_text: element.textContent?.substring(0, 50),
            timestamp: Date.now()
          });
          console.log('âœ… Utmify: InitiateCheckout tracked successfully');
        } else {
          // Queue for later
          window.utmifyQueue.push({
            event: 'InitiateCheckout',
            element_class: element.className,
            element_text: element.textContent?.substring(0, 50),
            timestamp: Date.now()
          });
          console.log('ðŸ“Š Utmify: InitiateCheckout queued (pixel not ready)');
        }
      }
      
      // Setup click listeners for checkout buttons
      function setupUtmifyTracking() {
        // Track all existing checkout buttons
        document.querySelectorAll('.checkout-button').forEach(function(button) {
          button.addEventListener('click', function() {
            trackUtmifyInitiateCheckout(this);
          });
        });
        
        // Setup mutation observer for dynamically added buttons
        var observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
              if (node.nodeType === 1) { // Element node
                // Check if the added node is a checkout button
                if (node.classList && node.classList.contains('checkout-button')) {
                  node.addEventListener('click', function() {
                    trackUtmifyInitiateCheckout(this);
                  });
                }
                // Check for checkout buttons within the added node
                var checkoutButtons = node.querySelectorAll && node.querySelectorAll('.checkout-button');
                if (checkoutButtons) {
                  checkoutButtons.forEach(function(button) {
                    button.addEventListener('click', function() {
                      trackUtmifyInitiateCheckout(this);
                    });
                  });
                }
              }
            });
          });
        });
        
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
        
        console.log('ðŸŽ¯ Utmify: Checkout button tracking setup complete');
      }
      
      // Setup tracking when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupUtmifyTracking);
      } else {
        setupUtmifyTracking();
      }
      
      // Process queued events when Utmify loads
      var checkUtmify = setInterval(function() {
        if (typeof window.utmify === 'function' && window.utmifyQueue && window.utmifyQueue.length > 0) {
          console.log('ðŸ“Š Processing queued Utmify events:', window.utmifyQueue.length);
          window.utmifyQueue.forEach(function(eventData) {
            window.utmify('track', eventData.event, eventData);
          });
          window.utmifyQueue = [];
          clearInterval(checkUtmify);
        }
      }, 1000);
      
      // Fallback event listener for manual triggers
      window.addEventListener('utmify-track', function(event) {
        console.log('ðŸ“Š Utmify fallback event received:', event.detail);
        
        if (typeof window.utmify === 'function') {
          window.utmify('track', event.detail.event, event.detail);
        } else {
          window.utmifyQueue = window.utmifyQueue || [];
          window.utmifyQueue.push(event.detail);
        }
      });
    </script>

    <!-- âœ… CORRECT: Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1205864517252800');
    fbq('track', 'PageView');
    </script>

    <!-- âœ… RedTrack Universal Script -->
    <script src="https://rdt.obluemagicdrops.com/uniclick.js?attribution=lastpaid&cookiedomain=elaborate-smakager-4592e9.netlify.app&cookieduration=90&defaultcampaignid=68685bcb51f1690d1f917171&regviewonce=false"></script>
  </head>
  <body>
    <!-- âœ… CORRECT: Meta Pixel noscript -->
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1205864517252800&ev=PageView&noscript=1"
    /></noscript>
    
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>